{"ast":null,"code":"var _jsxFileName = \"/Users/mosesle/Desktop/afc-housekeeping-project/frontend/src/BusynessDashboard.js\",\n  _s = $RefreshSig$();\n// frontend/src/BusynessDashboard.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\n\n// Register Chart.js components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nfunction BusynessDashboard() {\n  _s();\n  const [reservations, setReservations] = useState([]);\n  const [timePeriod, setTimePeriod] = useState('week'); // default time period\n\n  useEffect(() => {\n    axios.get('http://localhost:5001/api/reservations').then(response => setReservations(response.data)).catch(error => console.error('Error fetching reservations:', error));\n  }, []);\n\n  // Helper function to get ISO week number\n  function getWeekNumber(d) {\n    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n    const dayNum = d.getUTCDay() || 7;\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    return Math.ceil(((d - yearStart) / 86400000 + 1) / 7);\n  }\n\n  // Group reservations by selected time period (using checkIn date)\n  const groupReservations = (data, period) => {\n    const groups = {};\n    data.forEach(res => {\n      if (!res.checkIn) return;\n      const date = new Date(res.checkIn);\n      let key = '';\n      if (period === 'week') {\n        const weekNumber = getWeekNumber(date);\n        key = `Week ${weekNumber} ${date.getFullYear()}`;\n      } else if (period === 'month') {\n        key = `${date.getFullYear()}-${('0' + (date.getMonth() + 1)).slice(-2)}`;\n      } else if (period === 'halfYear') {\n        const half = date.getMonth() < 6 ? 'H1' : 'H2';\n        key = `${date.getFullYear()} ${half}`;\n      } else if (period === 'year') {\n        key = `${date.getFullYear()}`;\n      }\n      groups[key] = groups[key] ? groups[key] + 1 : 1;\n    });\n    return groups;\n  };\n  const grouped = groupReservations(reservations, timePeriod);\n  const labels = Object.keys(grouped);\n  const counts = Object.values(grouped);\n  const data = {\n    labels: labels.length > 0 ? labels : ['No Data'],\n    datasets: [{\n      label: `Number of Reservations (${timePeriod})`,\n      data: counts.length > 0 ? counts : [0],\n      backgroundColor: 'rgba(153,102,255,0.6)'\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Busyness Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Select Time Period: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: timePeriod,\n        onChange: e => setTimePeriod(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"week\",\n          children: \"Week\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"month\",\n          children: \"Month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"halfYear\",\n          children: \"Half Year\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"year\",\n          children: \"Year\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Bar, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(BusynessDashboard, \"EoQc6HWqOCaJ+9gNawRXqS3Ppbg=\");\n_c = BusynessDashboard;\nexport default BusynessDashboard;\nvar _c;\n$RefreshReg$(_c, \"BusynessDashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","Bar","jsxDEV","_jsxDEV","register","BusynessDashboard","_s","reservations","setReservations","timePeriod","setTimePeriod","get","then","response","data","catch","error","console","getWeekNumber","d","Date","UTC","getFullYear","getMonth","getDate","dayNum","getUTCDay","setUTCDate","getUTCDate","yearStart","getUTCFullYear","Math","ceil","groupReservations","period","groups","forEach","res","checkIn","date","key","weekNumber","slice","half","grouped","labels","Object","keys","counts","values","length","datasets","label","backgroundColor","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","_c","$RefreshReg$"],"sources":["/Users/mosesle/Desktop/afc-housekeeping-project/frontend/src/BusynessDashboard.js"],"sourcesContent":["// frontend/src/BusynessDashboard.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nfunction BusynessDashboard() {\n  const [reservations, setReservations] = useState([]);\n  const [timePeriod, setTimePeriod] = useState('week'); // default time period\n\n  useEffect(() => {\n    axios.get('http://localhost:5001/api/reservations')\n      .then(response => setReservations(response.data))\n      .catch(error => console.error('Error fetching reservations:', error));\n  }, []);\n\n  // Helper function to get ISO week number\n  function getWeekNumber(d) {\n    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\n    const dayNum = d.getUTCDay() || 7;\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n  }\n\n  // Group reservations by selected time period (using checkIn date)\n  const groupReservations = (data, period) => {\n    const groups = {};\n    data.forEach(res => {\n      if (!res.checkIn) return;\n      const date = new Date(res.checkIn);\n      let key = '';\n      if (period === 'week') {\n        const weekNumber = getWeekNumber(date);\n        key = `Week ${weekNumber} ${date.getFullYear()}`;\n      } else if (period === 'month') {\n        key = `${date.getFullYear()}-${('0' + (date.getMonth() + 1)).slice(-2)}`;\n      } else if (period === 'halfYear') {\n        const half = date.getMonth() < 6 ? 'H1' : 'H2';\n        key = `${date.getFullYear()} ${half}`;\n      } else if (period === 'year') {\n        key = `${date.getFullYear()}`;\n      }\n      groups[key] = groups[key] ? groups[key] + 1 : 1;\n    });\n    return groups;\n  };\n\n  const grouped = groupReservations(reservations, timePeriod);\n  const labels = Object.keys(grouped);\n  const counts = Object.values(grouped);\n\n  const data = {\n    labels: labels.length > 0 ? labels : ['No Data'],\n    datasets: [\n      {\n        label: `Number of Reservations (${timePeriod})`,\n        data: counts.length > 0 ? counts : [0],\n        backgroundColor: 'rgba(153,102,255,0.6)',\n      }\n    ]\n  };\n\n  return (\n    <div>\n      <h2>Busyness Dashboard</h2>\n      <div>\n        <label>Select Time Period: </label>\n        <select value={timePeriod} onChange={e => setTimePeriod(e.target.value)}>\n          <option value=\"week\">Week</option>\n          <option value=\"month\">Month</option>\n          <option value=\"halfYear\">Half Year</option>\n          <option value=\"year\">Year</option>\n        </select>\n      </div>\n      <Bar data={data} />\n    </div>\n  );\n}\n\nexport default BusynessDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}